---
## Author
author:
  name: Чамочумби Аксель
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчет по лабораторной работе №7"
subtitle: "Команды безусловного и условного переходов в Nasm. Программирование ветвлений."
license: "CC BY"
---

# Цель работы

Изучение команд условного и безусловного переходов. Приобретение навыков написания
программ с использованием переходов. Знакомство с назначением и структурой файла
листинга.

# Задание

## Задания для лабораторной работы

1. Создать каталог для программ лабораторной работы №7, перейти в него и создать файл `lab7-1.asm`.

2. Ввести в файл `lab7-1.asm` текст программы из листинга 7.1.

3. Создать исполняемый файл и запустить его.

4. Изменить текст программы в соответствии с листингом 7.2. Создать исполняемый файл и проверить его работу.

5. Изменить текст программы, добавив или изменив инструкции `jmp`.

6. Создать файл `lab7-2.asm` в каталоге `~/work/arch-pc/lab07`. Внимательно изучить текст программы из листинга 7.3 и ввести его в `lab7-2.asm`.

7. Создать исполняемый файл и проверить его работу для разных значений B.

8. Создать файл листинга для программы из файла `lab7-2.asm`. Открыть файл листинга `lab7-2.lst` с помощью любого текстового редактора.

9. Внимательно ознакомиться с его форматом и содержимым. Подробно объяснить содержимое трёх строк файла листинга по выбору.

10. Открыть файл с программой `lab7-2.asm` и в любой инструкции с двумя операндами удалить один операнд. Выполнить трансляцию с получением файла листинга.

11. Ответить на вопросы: Какие выходные файлы создаться в этом случае? Что добавиться в листинге?

## Задания для самостоятельной работы

1. Напишите программу нахождения наименьшей из 3 целочисленных переменных a,b и c. Значения переменных выбрать из табл. 7.5 в соответствии с вариантом, полученным при выполнении лабораторной работы № 7. Создайте исполняемый файл и проверьте его работу. 

2. Напишите программу, которая для введенных с клавиатуры значений x и a вычисляет значение заданной функции f(x) и выводит результат вычислений. Вид функции f(x) выбрать из таблицы 7.6 вариантов заданий в соответствии с вариантом, полученным при выполнении лабораторной работы № 7. Создайте исполняемый файл и проверьте его работу для значений x и a из 7.6. 

# Выполнение лабораторной работы

## Реализация переходов в NASM

Создаём директорию lab07 и создаём в этом каталоге файл lab7-1.asm ([рис. @fig-004]).

![Создаём директорию и файл](image/1.png){#fig-004 width=70%}

Записываем код программы с использованием инструкции jmp в файл lab7-1.asm ([рис. @fig-005]).

![Записываем код программы](image/2.png){#fig-005 width=70%}

Создаём исполняемый файл и запускаем его ([рис. @fig-006]).

![Создаём и запускаем](image/3.png){#fig-006 width=70%}

Таким образом, использование инструкции jmp _label2 меняет порядок исполнения инструкций и позволяет выполнить инструкции начиная с метки _label2, пропустив вывод первого сообщения.

Изменяем текст программы в соответствии с листингом 7.2 ([рис. @fig-007]).

![Изменяем текст программы](image/4.png){#fig-007 width=70%}

Создаём исполняемый файл и запускаем его ([рис. @fig-008]).

![Создаём и запускаем](image/5.png){#fig-008 width=70%}

Ещё раз изменяем текст программы, добавив и изменив инструкции jmp ([рис. @fig-009]).

![Ещё раз изменяем текст программы](image/6.png){#fig-009 width=70%}

Создаём исполняемый файл и запускаем его ([рис. @fig-010]).

![Создаём и запускаем](image/7.png){#fig-010 width=70%}

Создаём файл lab7-2.asm в каталоге ~/work/arch-pc/lab07 ([рис. @fig-011]).

![Создаём файл lab7-2.asm](image/8.png){#fig-011 width=70%}

Внимательно изучаем текст программы из листинга 7.3 и вводим в lab7-2.asm ([рис. @fig-012]).

![Изучаем текст программы и вводим в lab7-2.asm](image/9.png){#fig-012 width=70%}

Создаём исполняемый файл и проверяем его работу для разных значений B ([рис. @fig-013]).

![Создаём и запускаем с разными значениями В](image/10.png){#fig-013 width=70%}

## Изучение структуры файлы листинга

Создаём файл листинга для программы из файла lab7-2.asm ([рис. @fig-014]).

![Создаём файл lab7-2.lst](image/11.png){#fig-014 width=70%}

Строка 65 `00000045` - адрес в сегменте кода, `BB00000000` - машинный код, `mov ebx, 0` - присваивает регистру ebx значение 0 (код возврата) ([рис. @fig-015]).

Строка 66: `0000004A` - адрес в сегменте кода, `B801000000` - машинный код, `mov eax, 1` - присваивает регистру eax значение 1 (номер системного вызова exit) ([рис. @fig-015]).

Строка 67: `0000004F` - адрес в сегменте кода, `CD80` - машинный код, `int 80h` - вызывает прерывание ядра для завершения программы ([рис. @fig-015]).

![Открываем файл lab7-2.lst](image/12.png){#fig-015 width=70%}

Открываем файл lab7-2.asm и в инструкции с 2 операндами удаляем 1 операнд ([рис. @fig-016]).

![Открываем файл lab7-2.asm и удаляем 1 операнд](image/13.png){#fig-016 width=70%}

Система выдает ошибку ([рис. @fig-017]).

![Выполняем трансляцию с получением файла листинга](image/14.png){#fig-017 width=70%}

На строке 42 добавляется строка с ошибкой ([рис. @fig-018]).

![Ещё раз открываем файл lab7-2.lst](image/15.png){#fig-018 width=70%}

## Самостоятельная работа

1. Напишите программу нахождения наименьшей из 3 целочисленных переменных a,b и c. Значения переменных выбрать из табл. 7.5 в соответствии с вариантом, полученным при выполнении лабораторной работы № 7. Создайте исполняемый файл и проверьте его работу. 

Создаём файл lab7-3.asm в директории lab07 ([рис. @fig-019]).

![Создаём файл lab7-3.asm](image/16.png){#fig-019 width=70%}

Пишем код программы для нахождение наименьшего числа переменных a,b,c ([рис. @fig-020]).

![Пишем код программы](image/17.png){#fig-020 width=70%}

Создаём исполняемый файл и запускаем программу lab7-3 ([рис. @fig-021]).

![Создаём и запускаем программу lab7-3](image/18.png){#fig-021 width=70%}

2. Напишите программу, которая для введенных с клавиатуры значений x и a вычисляет значение заданной функции f(x) и выводит результат вычислений. Вид функции f(x) выбрать из таблицы 7.6 вариантов заданий в соответствии с вариантом, полученным при выполнении лабораторной работы № 7. Создайте исполняемый файл и проверьте его работу для значений x и a из 7.6. 

Создаём файл lab7-4.asm в директории lab07 ([рис. @fig-022]).

![Создаём файл lab7-4.asm](image/20.png){#fig-02 width=70%}

Пишем программу, которая для введенных с клавиатуры значений x и a вычисляет значение заданной функции f(x) и выводит результат вычислений ([рис. @fig-023]).

![Пишем программу](image/19.png){#fig-023 width=70%}

Создаём исполняемый файл и запускаем программу lab7-4 ([рис. @fig-024]).

![Создаём и запускаем программу lab7-4](image/21.png){#fig-024 width=70%}

# Выводы

Мы изучили команды условного и безусловного переходов, приобрели навыки написания программ с их использованием, а также познакомились с назначением и структурой файла листинга.

# Список литературы{.unnumbered}

1. GDB: The GNU Project Debugger. — URL: https://www.gnu.org/software/gdb/.
2. GNU Bash Manual. — 2016. — URL: https://www.gnu.org/software/bash/manual/.
3. Midnight Commander Development Center. — 2021. — URL: https://midnight-commander.org/.
4. NASM Assembly Language Tutorials. — 2021. — URL: https://asmtutor.com/.
5. Newham C. Learning the bash Shell: Unix Shell Programming. — O’Reilly Media, 2005. —354 с. — (In a Nutshell). — ISBN 0596009658. — URL: http://www.amazon.com/Learningbash-Shell-Programming-Nutshell/dp/0596009658.
6. Robbins A. Bash Pocket Reference. — O’Reilly Media, 2016. — 156 с. — ISBN 978-1491941591.
7. The NASM documentation. — 2021. — URL: https://www.nasm.us/docs.php.
8. Zarrelli G. Mastering Bash. — Packt Publishing, 2017. — 502 с. — ISBN 9781784396879.
9. Колдаев В. Д., Лупин С. А. Архитектура ЭВМ. — М. : Форум, 2018.
10. Куляс О. Л., Никитин К. А. Курс программирования на ASSEMBLER. — М. : Солон-Пресс,2017.
11. Новожилов О. П. Архитектура ЭВМ и систем. — М. : Юрайт, 2016.
12. Расширенный ассемблер: NASM. — 2021. — URL: https://www.opennet.ru/docs/RUS/nasm/.
13. Робачевский А., Немнюгин С., Стесик О. Операционная система UNIX. — 2-е изд. — БХВПетербург, 2010. — 656 с. — ISBN 978-5-94157-538-1.
14. Столяров А. Программирование на языке ассемблера NASM для ОС Unix. — 2-е изд. — М. : МАКС Пресс, 2011. — URL: http://www.stolyarov.info/books/asm_unix.
15. Таненбаум Э. Архитектура компьютера. — 6-е изд. — СПб. : Питер, 2013. — 874 с. — (Классика Computer Science).
16. Таненбаум Э., Бос Х. Современные операционные системы. — 4-е изд. — СПб. : Питер, 2015. — 1120 с. — (Классика Computer Science).

::: {#refs}
:::
